
<html>
    <head>
    <title>DX Example</title>
    <script src="../build/3Dmol.js"></script>

    <style>
    head, body {
        margin: 0;
        border: 0;
        padding: 0;
        max-height: 100vh
    }
    </style>
    <script>
    $(document).ready(function() {
        
        
        var viewer = $3Dmol.createViewer("viewer");
        
        // TODO
        // seldist, coords, and the way to select part of the volume as the isosurface
        // scale/positioning of .cube benzene-homo !
        // integrating volume renderer with molecule renderer (depth)!
        // having multiple volumetric renderers in this file (even on the same volumedata)
        // integrate shader with fog stuff

        // var url = "lobster_301x324x56_uint8.raw"; 
        // var req = new XMLHttpRequest();
        // req.open("GET", url, true);
        // req.responseType = "arraybuffer";    
        // req.onload = function(evt) {
        //     var dataBuffer = req.response;
        //     dataBuffer = new Uint8Array(dataBuffer);
        
        $.get('../tests/test_structs/benzene-homo.cube', function(data){
        // $.get('../tests/auto/data/bohr.cube', function(data){
        // $3Dmol.getbin('../tests/auto/data/1lo6_2FOFC.ccp4', function(data) {
            var voldata = new $3Dmol.VolumeData(data, "cube");
            // viewer.addIsosurface(voldata, {isoval: 0.01, color: "blue", alpha: 1.0, smoothness: 1}); 
            viewer.addVolumetricRenderer(voldata, {
                transferfn:[
                    { Color: "#ff0000", pos: 0.0 }, 
                    { Color: "#0000ff", pos: 0.16 },
                ],
                // pos: {x:0,y:0,z:0}  // TODO: i can send corner or center as the pos. so?
            });
            
            // viewer.addIsosurface(voldata, {isoval: 0.5,
            //                            color: "green",
            //                            opacity: 1.0,
            //                            // coords: [{x: 40.948, y: 78.96, z: 83.987}], // the coords of the center point that we need to select
            //                            // seldist: 3.0   // the selection distance around the center
            //                         });
                                    
            // var rec1 = viewer.addModel($('#1udt').val(), "pdb");
            // rec1.setStyle({resn:'VIA'},{stick:{color:'red', opacity:'1.0'}});
               
            // viewer.addLabel("Aromatic", {position: {x:2.6, y:0.75, z:0.35}, backgroundColor: 0x800080, backgroundOpacity: 0.8});

            // var shape = viewer.addShape({color: 'red'});
            // shape.addBox({corner:{x:2,y:0,z:0}, dimensions: {w: 1, h: 1, d: 1}});
            // shape.addBox({center:{x:0,y:0,z:0}, dimensions: {w: 1, h: 1, d: 1}});
            
            // 117, 97, 110

            viewer.zoomTo();
            viewer.render();
        });
        // req.send();
    });
    </script>
    </head>
    <body>
        <div id="viewer" style="width: 100%; height: 100vh; margin: 0; padding: 0; border: 0;"></div>
        <textarea id="1udt" style="visibility:false">
            HETATM 2545  C1  VIA A1000      0.617  0.895 0.587  1.00 0.74      D    C  
            HETATM 2546  C2  VIA A1000      1.123  2.626 2.650  1.00 29.07      D    C  
            HETATM 2547  O3  VIA A1000      1.007  2.196 2.787  1.00 29.92      D    O  
            HETATM 2548  C4  VIA A1000      5.761  1.471 2.911  1.00 32.41      D    C  
            HETATM 2549  C5  VIA A1000      2.432  2.112 2.909  1.00 37.38      D    C  
            HETATM 2550  C6  VIA A1000      0.232  1.296 3.064  1.00 40.25      D    C  
            CONECT 2545 2546
            CONECT 2546 2545 2547
            CONECT 2547 2546 2548
            CONECT 2548 2547 2549 2553
            CONECT 2549 2548 2550
            END
        </textarea>
    </body>
</html>
