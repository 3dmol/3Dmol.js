<!DOCTYPE html>
<html>
    <head>
        <title>3Dmol.js Test</title>
        <script src="../build/3Dmol.js"></script> 
            
        <style> head, body {margin: 0; border: 0; padding: 0; max-height: 100vh}</style>  
        <script>
        var glviewer = null;
        
        $(document).ready(function() {
                        
            $.get("test_structs/4udv.pdb", function(data){
                
                var viewer = glviewer = $3Dmol.createViewer("gldiv");
                    
                glviewer.setBackgroundColor(0xffffff);
                                        
                var m1 = glviewer.addModel(data, "pdb",{keepH:false, doAssembly: true});   
                
                var m2 = glviewer.addModel(data, "pdb",{keepH:false, doAssembly: true});   
                syms = m1.getSymmetries();
                var sym1 = [];
                var sym2 = [];
                for(var i = 0; i < syms.length; i++) {
                    if(i % 2 == 0) {
                        sym1.push(syms[i]);
                    } else {
                        sym2.push(syms[i]);
                    }
                }
                m1.setSymmetries(sym1);
                m2.setSymmetries(sym2);

                glviewer.addSurface($3Dmol.SurfaceType.VDW, {color: "white"},{model:m2});
                
                glviewer.addSurface($3Dmol.SurfaceType.VDW, {color: 0x00ccff},{model:m1});

                //m1.setStyle({},{cartoon: {color: 0x4bdec}});            
              //  m2.setStyle({},{cartoon: {color: "white"}});            
                glviewer.zoomTo();
                glviewer.render();

                 

            });
        });
        
        </script>
    </head>
    <body>
         <div id="gldiv" style="width: 100%; height: 80vh; margin: 0; padding: 0; border: 0; "></div> 

         <hr style="margin: 0;"> 

        <br>
        <input type="button" value="Stick" onclick="glviewer.setStyle({},{stick:{}}); glviewer.render();"></input>
        <input type="button" value="Line" onclick="glviewer.setStyle({},{line:{}}); glviewer.render();"></input>
        <input type="button" value="Cross" onclick="glviewer.setStyle({},{cross:{linewidth:5}}); glviewer.render();"></input>
        <input type="button" value="Sphere" onclick="glviewer.setStyle({},{sphere:{}}); glviewer.render();"></input>
        <input type="button" value="SphereI" onclick="glviewer.setStyle({},{spherei:{}}); glviewer.render();"></input>
        <input type="button" value="Cartoon" onclick="glviewer.setStyle({hetflag:false},{cartoon:{color: 'spectrum'}}); glviewer.render();"></input>
        <input type="button" value="Trace" onclick="glviewer.setStyle({},{cartoon:{style: 'trace',color: 'spectrum',thickness: 0.3}}); glviewer.render();"></input>
        <input type="button" value="Label alpha C's" onclick="addLabels(glviewer); glviewer.render();"></input>
        <br>
        <input type="button" value="Surface1" onclick="surf1 = glviewer.addSurface($3Dmol.SurfaceType.VDW, {}, {hetflag:false},{hetflag:false},{chain:'B'});"></input>
        <input type="button" value="Surface2" onclick="surf2 = glviewer.addSurface($3Dmol.SurfaceType.VDW, {map:{prop:'partialCharge',scheme:new $3Dmol.RWB(-.6,.6)}, opacity:1}, {chain:'B'}, {chain:'B'},{chain:'A'},true);"></input>
       <input type="button" value="RM Surface1" onclick="glviewer.removeSurface(surf1), lastsurfstyle = 1;"></input>
        <input type="button" value="RM Surface2" onclick="glviewer.removeSurface(surf2), lastsurfstyle = 1;"></input>
        <input type="button" value="T" onclick="toggleSurfTrans(surf1);"></input>
        <br>
        <input type="button" value="Recenter" onclick="glviewer.zoomTo();"></input>
                <br>
        <input id="pdbid" value="2POR" size=4><button onclick="glviewer.clear(); m = $3Dmol.download('pdb:' + $('#pdbid').val(), glviewer);">Download</button><br>
 



    </body>
</html>
