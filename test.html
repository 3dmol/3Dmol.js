<!DOCTYPE html>
<html style="height:100%; padding: 0; margin: 0">
    <head>
        <title>WebMol Test</title>
        <!-- data-main attribute tells require.js to load
             scripts/main.js after require.js loads. -->
        <script  src="js/jquery-1.9.1.js"></script>
        <script src="three.js/build/three.js"></script>
		<script type="text/javascript" src="Jmol/appletweb/JmolCore.js"></script>
		<script type="text/javascript" src="Jmol/appletweb/JmolApplet.js"></script>
		<script type="text/javascript" src="Jmol/appletweb/JmolApi.js"></script>       
		<script src="webmol/webmol.js"></script>
        <script src="webmol/properties.js"></script>
		<script src="webmol/colors.js"></script>
        <script src="webmol/glmodel.js"></script>
        <script src="webmol/glcartoon.js"></script>
        <script src="webmol/ProteinSurface4.js"></script>
        <script src="webmol/MarchingCubeData.js"></script>
        <script src="webmol/glviewer.js"></script>
        <script src="webmol/jmolviewer.js"></script>
        <script src="webmol/jmolmodel.js"></script>
        <script src="webmol/colorschemes.js"></script>
        
        
        <script>
        var glviewer = null;
        var jviewer = null;
        $(document).ready(function() {
        	var moldata = $("#moldata").val();
        	
            glviewer = WebMol.createViewer("gldiv", {defaultcolors: WebMol.rasmolElementColors, callback : function(viewer) {
               // viewer.setBackgroundColor(0xffffff);
                //var m = viewer.addModel(moldata,"pdb");
                //viewer.mapAtomProperties(WebMol.partialCharges);
                //viewer.zoomTo();
                //viewer.render();
            }});	
            glviewer.setBackgroundColor(0xffffff);
            var m = glviewer.addModel(moldata,"pdb");
            glviewer.mapAtomProperties(WebMol.partialCharges);
            glviewer.zoomTo();
            glviewer.render();
            jviewer = WebMol.createViewer("jmoldiv",{order: ["jmol"], defaultcolors: WebMol.rasmolElementColors, callback:
                function(viewer) {
            	  viewer.setBackgroundColor(0);
            	   var m = viewer.addModel(moldata,"pdb");
            	   viewer.mapAtomProperties(WebMol.partialCharges);
            	         jviewer.zoomTo();
            	         jviewer.render();            	
            }});	         
        });
        </script>
    </head>
    <body >
        <h1>WebMol</h1>
        <table >
        <tr ><td valign="top">
         <div id="gldiv" style="width: 450px; height: 450px; border: 2px solid black; "></div>       
        <br>
        <input type="button" value="Stick" onclick="glviewer.setStyle({stick:{}}); glviewer.render();"></input>
        <input type="button" value="Line" onclick="glviewer.setStyle({line:{}}); glviewer.render();"></input>
        <input type="button" value="Cross" onclick="glviewer.setStyle({cross:{}}); glviewer.render();"></input>
        <input type="button" value="Sphere" onclick="glviewer.setStyle({sphere:{}}); glviewer.render();"></input>
        <input type="button" value="Cartoon" onclick="glviewer.setStyle({cartoon:{}}); glviewer.render();"></input>
        <br>
        <input type="button" value="Surface1" onclick="surf1 = glviewer.addSurface(WebMol.SurfaceType.SES, {}, {chain:'A'}, {chain:'A'},{chain:'B'});"></input>
        <input type="button" value="Surface2" onclick="surf2 = glviewer.addSurface(WebMol.SurfaceType.VDW, {map:{prop:'partialCharge',scheme:new WebMol.RWB(-.6,.6)}, opacity:1}, {chain:'B'}, {chain:'B'},{chain:'A'});"></input>
       <input type="button" value="RM Surface1" onclick="glviewer.removeSurface(surf1);"></input>
        <input type="button" value="RM Surface2" onclick="glviewer.removeSurface(surf2);"></input>
        <input type="button" value="T" onclick="glviewer.setSurfaceMaterialStyle(surf1,{ opacity: .5});"></input>
        <br>
        <input type="button" value="Recenter" onclick="glviewer.zoomTo();"></input>
        </td>
        <td valign="top">
        <div id="jmoldiv" style="width: 450px; height: 450px; border: 2px solid black; padding: 0"></div>
        <br>
        <input type="button" value="Stick" onclick="jviewer.setStyle({stick:{}}); jviewer.render();"></input>
        <input type="button" value="Line" onclick="jviewer.setStyle({line:{}}); jviewer.render();"></input>
        <input type="button" value="Cross" onclick="jviewer.setStyle({cross:{}}); jviewer.render();"></input>
        <input type="button" value="Sphere" onclick="jviewer.setStyle({sphere:{}}); jviewer.render();"></input>
        <input type="button" value="Cartoon" onclick="jviewer.setStyle({cartoon:{}}); jviewer.render();"></input>
               <br>
        <input type="button" value="Surface1" onclick="surf1 = jviewer.addSurface(WebMol.SurfaceType.SES, {}, {chain:'A'}, {chain:'A'},{chain:'B'});"></input>
        <input type="button" value="Surface2" onclick="surf2 = jviewer.addSurface(WebMol.SurfaceType.VDW, {map:{prop:'partialCharge',scheme:new WebMol.RWB(-.6,.6)}, opacity:1}, {chain:'B'}, {chain:'B'},{chain:'A'});"></input>
       <input type="button" value="RM Surface1" onclick="jviewer.removeSurface(surf1);"></input>
        <input type="button" value="RM Surface2" onclick="jviewer.removeSurface(surf2);"></input>
        <input type="button" value="T" onclick="jviewer.setSurfaceMaterialStyle(surf1,{ color: 0xffff, opacity: .4});"></input>
        
        <br>
        <input type="button" value="Recenter" onclick="jviewer.zoomTo();"></input>
        </td>
        </tr>
        </table>
<textarea style="visibility: hidden; width: 0; height: 0;" id="moldata">           
HETATM    1  N1  PLP B1475      -4.964   7.553  10.322  1.00 54.17           N  
HETATM    2  C2  PLP B1475      -3.815   8.122  10.863  1.00 56.39           C  
HETATM    3  C2A PLP B1475      -3.845   8.619  12.319  1.00 53.41           C  
HETATM    4  C3  PLP B1475      -2.667   8.224  10.080  1.00 56.94           C  
HETATM    5  O3  PLP B1475      -1.529   8.766  10.606  1.00 57.23           O  
HETATM    6  C4  PLP B1475      -2.696   7.743   8.735  1.00 56.96           C  
HETATM    7  C4A PLP B1475      -1.496   8.056   7.819  1.00 60.37           C  
HETATM    8  C5  PLP B1475      -3.904   7.134   8.224  1.00 53.66           C  
HETATM    9  C6  PLP B1475      -5.015   7.068   9.040  1.00 54.69           C  
HETATM   10  C5A PLP B1475      -4.049   6.439   6.866  1.00 48.64           C  
HETATM   11  O4P PLP B1475      -3.733   5.061   6.685  1.00 38.51           O  
HETATM   12  P   PLP B1475      -3.220   4.528   5.279  1.00 34.15           P  
HETATM   13  O1P PLP B1475      -4.408   4.597   4.388  1.00 32.85           O  
HETATM   14  O2P PLP B1475      -2.756   3.147   5.550  1.00 35.95           O1-
HETATM   15  O3P PLP B1475      -2.129   5.469   4.915  1.00 33.63           O  
HETATM   16  C1  AOA B1476      -0.633  11.052   6.201  1.00 57.32           C  
HETATM   17  N1  AOA B1476      -1.202   9.393   7.578  1.00 63.23           N  
HETATM   18  O1  AOA B1476      -0.177   9.823   6.757  1.00 62.16           O  
HETATM   19  C2  AOA B1476       0.261  11.430   5.046  1.00 54.59           C  
HETATM   20  O2  AOA B1476       1.219  10.692   4.761  1.00 54.49           O  
HETATM   21  O3  AOA B1476       0.002  12.480   4.424  1.00 55.46           O                                                                                                                                              
</textarea>        
    </body>
</html>
