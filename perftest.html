<!DOCTYPE html>
<html style="height:100%; padding: 0; margin: 0">
    <head>
        <title>WebMol Test</title>
        <!-- data-main attribute tells require.js to load
             scripts/main.js after require.js loads. -->
        <script  src="js/jquery-1.9.1.js"></script>
        <script src="three.js/build/three.js"></script>
		<script type="text/javascript" src="Jmol/appletweb/JmolCore.js"></script>
		<script type="text/javascript" src="Jmol/appletweb/JmolApplet.js"></script>
		<script type="text/javascript" src="Jmol/appletweb/JmolApi.js"></script>       
		<script src="webmol/webmol.js"></script>
        <script src="webmol/properties.js"></script>
		<script src="webmol/colors.js"></script>
        <script src="webmol/glmodel.js"></script>
        <script src="webmol/glcartoon.js"></script>
        <script src="webmol/ProteinSurface4.js"></script>
        <script src="webmol/MarchingCubeData.js"></script>
        <script src="webmol/glviewer.js"></script>
        <script src="webmol/jmolviewer.js"></script>
        <script src="webmol/jmolmodel.js"></script>
        <script src="webmol/colorschemes.js"></script>
        
        
        <script>
        var glviewer = null;

        styleSpec = {"stick":{stick:{}}, "line":{line:{}}, "cross":{cross:{}}, "sphere":{sphere:{}}, "cartoon":{cartoon:{}}};
        
        function showStyle(style){
        	
        	var groupname = "Rendering " + style;
        	console.group(groupname);
        	
        	var tag = " " + style + ": ";
        	
        	console.time(tag);
        	glviewer.setStyle({}, styleSpec[style]);
        	glviewer.render();
        	console.timeEnd(tag);
        	
        	console.groupEnd();
        	
        }
        
        function addSurf(){
        	
        	console.profile();
        	console.group("Rendering surface");
			console.time(" surface: ");
			surf = glviewer.addSurface(WebMol.SurfaceType.SES, {}, {chain:'A'}, {chain:'A'},{chain:'B'});
			console.timeEnd(" surface: ");
			console.profileEnd();
			
			return surf;
        }
        
        function makeTrans(){
        	
        	console.group("Making surface transparent");
        	console.time(" trans: ");
        	glviewer.setSurfaceMaterialStyle(surf,{ opacity: .5}); 
        	glviewer.render();
        	console.timeEnd(" trans: ");
        	
        	console.groupEnd();
        }
       
        $(document).ready(function() {
        	
            glviewer = WebMol.createViewer("gldiv", {defaultcolors: WebMol.rasmolElementColors, callback : function(viewer) {
                viewer.setBackgroundColor(0xffffff);
                viewer.mapAtomProperties(WebMol.partialCharges);
            }});
            

            
            alert("Beginning tests");
   
            console.time("Load and Render: ");
            
            WebMol.download('pdb:2I53', glviewer);
        
            console.timeEnd("Load and Render: ");
			

        });
        </script>
    </head>
    <body >
		<div id="gldiv" style="width: 100%; height: 800px; border: 2px solid black; "></div>  
        <br>
        <div id="tests"></div>
              
    <script>
    
    	for (style in styleSpec){
    		$("#tests").append("<input type=button value="+style+" onclick=showStyle('"+style+"')></input>");
    	}
    	
    	$("#tests").append("<br><input type=button value=surf onclick='surf = addSurf()'></input>");
    	$("#tests").append("<br><input type=button value=T onclick=makeTrans()></input>");
    	
    </script>
    
    </body>
</html>
